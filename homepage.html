<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Skins</title>
    <link rel="stylesheet" href="homepage.css">
    <link rel="stylesheet" href="notifications.css">
    <script src="notifications.js" defer></script>
</head>
<body>
    <!-- Header Section -->
    <header>
        <div class="navbar">
            <div class="logo">
                <img src="https://i.imgur.com/ze6XxZH.png" alt="Logo" />
            </div>
            <div class="nav-links">
                <a href="homepage.html">Market</a>
                <a id="create-listing" href="createlisting.html">Create Listing</a>
                <a href="savedlistings.html">Saved Listings</a>
                <a href="#" id="add-funds-btn">Add Funds</a>
            </div>
            <div class="user-actions">
                <div class="profile-dropdown">
                    <button class="profile-icon">Account</button>
                    <div class="dropdown-content" id="dropdown-content">
                        <a id="login-btn" href="#">Login</a>
                        <a id="create-account-btn" href="#">Create Account</a>
                        <a id="my-account-btn" href="myaccount.html" style="display:none;">My Account</a>
                        <a id="logout-btn" href="#" style="display:none;">Log Out</a>
                    </div>
                </div>
                <div class="cart-dropdown">
                    <button class="cart-button" id="cart-btn">Cart</button>
                    <div class="dropdown-content" id="cart-dropdown" style="display:none;"></div>
                </div>
            </div>
        </div>
    </header>

    <!-- Search & Filter Section -->
    <div class="filters-container">
        <input type="text" class="search-bar" placeholder="Search market" />
        <div class="price-filter">
            <input type="text" placeholder="From" />
            <input type="text" placeholder="To" />
            <button class="refresh-btn">â†»</button>
        </div>
        <div class="sort-filter">
            <label for="sort">Sort by:</label>
            <select id="sort">
                <option value="recommended">Recommended for you</option>
                <option value="priceLow">Price: Low to High</option>
                <option value="priceHigh">Price: High to Low</option>
                <option value="rarity">Rarity</option>
            </select>
        </div>
        <div class="weapon-filter">
            <label for="weapon-type">Weapon Type:</label>
            <select id="weapon-type">
                <option value="">All</option>
                <option value="rifle">Rifle</option>
                <option value="pistol">Pistol</option>
                <option value="shotgun">Shotgun</option>
                <option value="sniper">Sniper</option>
                <option value="knife">Knife</option>
            </select>
        </div>
        <div class="rarity-filter">
            <label for="rarity">Rarity:</label>
            <select id="rarity">
                <option value="">All</option>
                <option value="common">Common</option>
                <option value="rare">Rare</option>
                <option value="epic">Epic</option>
                <option value="legendary">Legendary</option>
            </select>
        </div>
    </div>

    <!-- Product Grid Section -->
    <main>
        <section class="product-grid" id="marketplace">
            <!-- Existing products -->
            <!-- Epic Rifle -->
            <div class="product-card" data-weapon-type="rifle" data-rarity="epic" data-price="6199.00" data-product-id="1" data-description="A powerful rifle with epic rarity.">
                <img src="https://steamcommunity-a.akamaihd.net/economy/image/-9a81dlWLwJ2UUGcVs_nsVtzdOEdtWwKGZZLQHTxDZ7I56KU0Zwwo4NUX4oFJZEHLbXH5ApeO4YmlhxYQknCRvCo04DEVlxkKgpou-6kejhjxszFJTwT09S5g4yCmfDLP7LWnn8f6pIl2-yYp9SnjA23-BBuNW-iLI-XJgFsZQyG_VW2lOq918e8uszLn2wj5HeAvkVdtQ/218x218" alt="Epic Rifle" />
                <div class="product-info">
                    <p class="title">Epic Rifle</p>
                    <p class="price">$6,199.00</p>
                    <button class="buy-now" onclick="buyNowFromHomepage({title: 'Epic Rifle', price: 6199.00}); event.stopPropagation();">Buy Now</button>
                </div>
            </div>

            <!-- Legendary Sniper -->
            <div class="product-card" data-weapon-type="sniper" data-rarity="legendary" data-price="11836.73" data-product-id="2" data-description="A legendary sniper with unmatched precision.">
                <img src="https://steamcommunity-a.akamaihd.net/economy/image/-9a81dlWLwJ2UUGcVs_nsVtzdOEdtWwKGZZLQHTxDZ7I56KU0Zwwo4NUX4oFJZEHLbXH5ApeO4YmlhxYQknCRvCo04DEVlxkKgpot621FAR17P7NdTRH-t26q4SZlvD7PYTQgXtu5Mx2gv2PrdSijAWwqkVtN272JIGdJw46YVrYqVO3xLy-gJC9u5vByCBh6ygi7WGdwUKTYdRD8A/218x218" alt="Legendary Sniper" />
                <div class="product-info">
                    <p class="title">Legendary Sniper</p>
                    <p class="price">$11,836.73</p>
                    <button class="buy-now" onclick="buyNowFromHomepage({title: 'Legendary Sniper', price: 11836.73}); event.stopPropagation();">Buy Now</button>
                </div>
            </div>

            <!-- Common Shotgun -->
            <div class="product-card" data-weapon-type="shotgun" data-rarity="common" data-price="5726.73" data-product-id="3" data-description="A reliable shotgun with common rarity.">
                <img src="https://i.imgur.com/3ripUog.png" alt="Common Shotgun" />
                <div class="product-info">
                    <p class="title">Common Shotgun</p>
                    <p class="price">$5,726.73</p>
                    <button class="buy-now" onclick="buyNowFromHomepage({title: 'Common Shotgun', price: 5726.73}); event.stopPropagation();">Buy Now</button>
                </div>
            </div>

            <!-- Rare Knife -->
            <div class="product-card" data-weapon-type="knife" data-rarity="rare" data-price="2548.67" data-product-id="4" data-description="A rare knife with exceptional sharpness.">
                <img src="https://steamcommunity-a.akamaihd.net/economy/image/-9a81dlWLwJ2UUGcVs_nsVtzdOEdtWwKGZZLQHTxDZ7I56KU0Zwwo4NUX4oFJZEHLbXH5ApeO4YmlhxYQknCRvCo04DEVlxkKgpovbSsLQJf0ebcZThQ6tCvq4GGqOT1I6vZn3lU18hwmOvN8IXvjVCLqSwwOj6rYJiTdQE7NQuEqFS7x7q9hpHovZrPmnpq6HJ24XmJzUDjgBpOarBug_fKVxzAUBpccViW/218x218" alt="Rare Knife" />
                <div class="product-info">
                    <p class="title">Rare Knife</p>
                    <p class="price">$2,548.67</p>
                    <button class="buy-now" onclick="buyNowFromHomepage({title: 'Rare Knife', price: 2548.67}); event.stopPropagation();">Buy Now</button>
                </div>
            </div>

            <!-- Common Pistol -->
            <div class="product-card" data-weapon-type="pistol" data-rarity="common" data-price="600.55" data-product-id="5" data-description="A common pistol with reliable performance.">
                <img src="https://steamcommunity-a.akamaihd.net/economy/image/-9a81dlWLwJ2UUGcVs_nsVtzdOEdtWwKGZZLQHTxDZ7I56KU0Zwwo4NUX4oFJZEHLbXH5ApeO4YmlhxYQknCRvCo04DEVlxkKgpovrG1eVcwg8zLZAJSvteJkoySnvnzDL_Dk2pc18h0juDU-MKtjla1r0Q9N2mid4-QcwJtM1_Z_Fm5yejrgpK9usnNmCBmvyZz5n_ZgVXp1upvFaAH/218x218" alt="Common Pistol" />
                <div class="product-info">
                    <p class="title">Common Pistol</p>
                    <p class="price">$600.55</p>
                    <button class="buy-now" onclick="buyNowFromHomepage({title: 'Common Pistol', price: 600.55}); event.stopPropagation();">Buy Now</button>
                </div>
            </div>
            <!-- Add more predefined products as needed -->
        </section>
    </main>

    <!-- Pop-Up Notification Container -->
    <div id="popup-notification-container" class="popup-container"></div>

    <!-- Footer Section -->
    <footer>
        <p>Selected items (0)</p>
        <button class="target-btn">Target | Bid</button>
        <button class="buy-btn">Buy</button>
    </footer>

    <script>
        // Load listings from LocalStorage
        const listings = JSON.parse(localStorage.getItem('listings')) || [];

        // Get the marketplace container
        const marketplace = document.getElementById('marketplace');

        // Loop through the listings and display them
        listings.forEach(listing => {
            const itemDiv = document.createElement('div');
            itemDiv.classList.add('product-card');

            itemDiv.innerHTML = `
                <img src="${listing.imageUrl}" alt="${listing.title}" class="product-image">
                <div class="product-info">
                    <h3 class="title">${listing.title}</h3>
                    <p class="price">$${parseFloat(listing.price).toLocaleString()}</p>
                    <button class="buy-now" onclick="buyNowFromHomepage({ title: '${listing.title}', price: ${listing.price} });">Buy Now</button>
                </div>
            `;

            // Add click event to navigate to the product page
            itemDiv.addEventListener('click', function() {
                window.location.href = `product.html?title=${encodeURIComponent(listing.title)}&image=${encodeURIComponent(listing.imageUrl)}&price=${encodeURIComponent(listing.price)}&description=${encodeURIComponent(listing.description)}`;
            });

            marketplace.appendChild(itemDiv);
        });

        function buyNowFromHomepage(product) {
            // Handle the "Buy Now" functionality
            console.log('Buying product:', product);
            // Add your implementation here
        }
    </script>

    <script src="homepage.js"></script>
    <script src="notifications.js"></script>
</body>
</html>
